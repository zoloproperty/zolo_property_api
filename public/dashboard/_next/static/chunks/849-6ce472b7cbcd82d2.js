"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[849],{4090:function(e,a,t){t.d(a,{i:function(){return s}});let s=e=>{let a=new Date(e),t=a.toLocaleString("en-US",{day:"2-digit",month:"2-digit",year:"numeric",hour12:!0});return t}},9849:function(e,a,t){t.d(a,{Z:function(){return S}});var s=t(5893),l=t(5049),n=t(7294),i=t(9473),r=t(3023),d=t(4090),o=t(6704),c=t(5379),m=t(8711),p=t(5675),h=t.n(p),u=t(4779),x=t(5292),v=t(2175),j=t(3408),b=t(2255),N=t(6310),_=t(1192),g=t(1441),w=t(1800),y=t(7582),f=t(5810),Z=e=>{var a,t;let{id:l,onClose:r,isActive:d,data:o,type:m,urls:p,path:h}=e,[Z,P]=(0,n.useState)(m==c.P7?{lat:22,lng:78}:{lat:((null==o?void 0:o.coordinates)||[])[0]||22,lng:((null==o?void 0:o.coordinates)||[])[1]||78}),[k,S]=(0,n.useState)(null==o?void 0:o.banner),C={ads_name:N.Z_().required("Name is required"),title:N.Z_().required("Title is required"),description:N.Z_().required("Description is required"),show_number:N.O7().default(!0),show_map:N.O7().default(!0),number:N.Z_().required("Number is required"),city:N.Z_().required("City is required"),zip_code:N.Rx().required("Zip code is required"),expiry_date:N.hT()},[A]=(0,n.useState)({ads_name:m==c.P7?"":o.ads_name,title:m==c.P7?"":o.title,description:m==c.P7?"":o.description,show_number:m!=c.P7&&o.show_number,show_map:m!=c.P7&&o.show_map,number:m==c.P7?"":o.number,city:m==c.P7?"":o.city,zip_code:m==c.P7?"":o.zip_code,expiry_date:m==c.P7?(()=>{let e=new Date,a=new Date(e);return a.setDate(e.getDate()+30),a})():o.expiry_date?((null===(a=new Date(o.expiry_date).toISOString())||void 0===a?void 0:a.split("T"))||[])[0]:null===(t=new Date().toISOString())||void 0===t?void 0:t.split("T")[0],coordinates:m==c.P7?{lat:22,lng:78}:{lat:((null==o?void 0:o.coordinates)||[])[0]||22,lng:((null==o?void 0:o.coordinates)||[])[1]||78}}),[B,q]=(0,n.useState)(m===c.P7?[]:o.galleryUrls),[F,D]=(0,n.useState)([]),[z,L]=(0,n.useState)([]),I=(0,i.I0)();(0,i.v9)(e=>{var a;return null===(a=e.login.userToken)||void 0===a?void 0:a.token}),(0,i.v9)(e=>e.recallApi.recallApi);let E=async e=>{let a;I((0,x.N)(!0));try{let t=new FormData;if(t.append("ads_name",e.ads_name.trim()),t.append("title",e.title.trim()),t.append("description",e.description.trim()),t.append("number",e.number),t.append("city",e.city),t.append("zip_code",e.zip_code),t.append("expiry_date",e.expiry_date),t.append("show_number",e.show_number),t.append("show_map",e.show_map),k&&t.append("banner",k),Z.lat&&Z.lng)Object.values(Z||{}).map(e=>{t.append("coordinates[]",e)});else throw(0,w.ZP)(w.vU,"coordinates is required"),Error("coordinates is required");F.length&&Object.values(F||{}).map(e=>{t.append("images",e)}),(null==B?void 0:B.length)?B.map((e,a)=>{(null==F?void 0:F.length)<=a&&t.append("gallery[]",e)}):(t.append("gallery[]",""),t.delete("banner"),t.append("banner","")),F&&z&&z.map(e=>[t.append("oldImages[]",e)]),a=m===c.P7?await u.Z.post(p,t,0,!0):await u.Z.put(p,t,l,!0),200==a.status&&(I((0,x.N)(!1)),I((0,_.d)(!0)),r(""))}catch(e){I((0,x.N)(!1))}finally{I((0,x.N)(!1))}};return(0,s.jsxs)(b.Z,{show:d,onHide:()=>r(""),dialogClassName:"modal-lg",style:{marginLeft:"23px"},backdrop:"static",children:[(0,s.jsx)(b.Z.Header,{closeButton:!0,children:(0,s.jsx)(b.Z.Title,{children:(0,s.jsxs)("h3",{children:[m===c.P7?"Add":"Edit"," ",h]})})}),(0,s.jsx)(b.Z.Body,{children:(0,s.jsx)(v.J9,{enableReinitialize:!0,onSubmit:E,initialValues:A,validationSchema:N.Ry().shape(C),children:e=>{let{values:a,setValues:t}=e;return(0,s.jsxs)(v.l0,{children:[(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"col-md-6 col-sm-12",children:[(0,s.jsxs)("div",{className:"w-100",children:[(0,s.jsx)(j.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"Ad name"})}),(0,s.jsx)(v.gN,{type:"text",id:"ads_name",placeholder:"Ad Name",name:"ads_name",className:"form-control-alternative form-control w-100"}),(0,s.jsx)(v.Bc,{className:"text-danger",name:"ads_name",component:"div"})]}),(0,s.jsx)("div",{className:"w-100",children:(0,s.jsxs)("div",{className:"w-100",children:[(0,s.jsx)(j.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"number"})}),(0,s.jsx)(v.gN,{type:"text",id:"number",placeholder:"number",name:"number",className:"form-control-alternative form-control w-100"}),(0,s.jsx)(v.Bc,{className:"text-danger",name:"number",component:"div"})]})}),(0,s.jsx)("div",{className:"w-100",children:(0,s.jsxs)("div",{className:"w-100",children:[(0,s.jsx)(j.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"Zip code"})}),(0,s.jsx)(v.gN,{type:"text",id:"zip_code",placeholder:"zip code",name:"zip_code",className:"form-control-alternative form-control w-100"}),(0,s.jsx)(v.Bc,{className:"text-danger",name:"zip_code",component:"div"})]})}),(0,s.jsxs)("div",{className:"d-flex mt-3",children:[(0,s.jsxs)("div",{className:"mt-2 me-5",children:[(0,s.jsx)(j.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"show number in Ad"})}),(0,s.jsx)("div",{children:(0,s.jsx)(f.Z,{name:"show_number",onChange:()=>t({...a,show_number:!(null==a?void 0:a.show_number)}),checked:(null==a?void 0:a.show_number)||!1,uncheckedIcon:!1,checkedIcon:!1,onColor:"#009EFB",offColor:"#dcdcdc",className:"status-switch"})}),(0,s.jsx)(v.Bc,{className:"text-danger",name:"show_number",component:"div"})]}),(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)(j.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"show map in Ad"})}),(0,s.jsx)("div",{children:(0,s.jsx)(f.Z,{onChange:()=>t({...a,show_map:!(null==a?void 0:a.show_map)}),checked:(null==a?void 0:a.show_map)||!1,uncheckedIcon:!1,checkedIcon:!1,onColor:"#009EFB",offColor:"#dcdcdc",className:"status-switch"})}),(0,s.jsx)(v.Bc,{className:"text-danger",name:"show_map",component:"div"})]})]})]}),(0,s.jsxs)("div",{className:"w-50",children:[(0,s.jsxs)("div",{className:"w-100",children:[(0,s.jsx)(j.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"title"})}),(0,s.jsx)(v.gN,{type:"text",id:"title",placeholder:"Title",name:"title",className:"form-control-alternative form-control w-100"}),(0,s.jsx)(v.Bc,{className:"text-danger",name:"title",component:"div"})]}),(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)(j.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"Description"})}),(0,s.jsx)(v.gN,{as:"textarea",rows:4,type:"textarea",placeholder:"Description",id:"description",name:"description",className:"form-control-alternative form-control"}),(0,s.jsx)(v.Bc,{className:"text-danger",name:"description",component:"div"})]}),(0,s.jsx)("div",{className:"w-100",children:(0,s.jsxs)("div",{className:"w-100",children:[(0,s.jsx)(j.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"city"})}),(0,s.jsx)(v.gN,{type:"text",id:"city",placeholder:"city",name:"city",className:"form-control-alternative form-control w-100"}),(0,s.jsx)(v.Bc,{className:"text-danger",name:"city",component:"div"})]})}),(0,s.jsx)("div",{className:"w-100",children:(0,s.jsxs)("div",{className:"w-100",children:[(0,s.jsx)(j.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"expiry date"})}),(0,s.jsx)(v.gN,{type:"date",id:"expiry_date",placeholder:"expiry date",name:"expiry_date",className:"form-control-alternative form-control w-100"}),(0,s.jsx)(v.Bc,{className:"text-danger",name:"expiry_date",component:"div"})]})})]})]}),(0,s.jsx)("hr",{}),(0,s.jsx)(y.Z,{Coordinates:Z,setCoordinates:P}),(0,s.jsx)(g.Z,{selectedFile:B,setSelectedFile:q,setFiles:D,Files:F,setDeletedFile:L,banner:k,setBanner:S}),(0,s.jsx)("div",{className:"w-100 d-flex justify-content-center",children:(0,s.jsxs)("button",{type:"submit",className:"btn btn-primary mt-5 d-block text-uppercase",children:[m===c.P7?"Add":"Update"," ",h]})})]})}})})]})},P=t(7435);let k=["ads_name","city","number","expiry_date","title","description","show_number","show_map"];var S=()=>{var e;P.Z.path="ads";let a=(0,i.I0)(),t=(0,i.v9)(e=>{var a;return null===(a=e.login.userToken)||void 0===a?void 0:a.token}),p=(0,i.v9)(e=>e.recallApi.recallApi),[u,x]=(0,n.useState)(1),[v,j]=(0,n.useState)(c.Wh),[b,N]=(0,n.useState)({list:[],pagination:{total:0}}),[_,g]=(0,n.useState)({}),[w,y]=(0,n.useState)(""),[f,S]=(0,n.useState)(!1),[C,A]=(0,n.useState)({post_id:0});(0,n.useEffect)(()=>(P.Z.get(u,v,N),()=>{}),[v,t,a,u,p]);let B=[{value:"S.No",index:!0},{key:"ads_name",value:"Ad"},{value:"Post Image",component:e=>{var a;let{data:t}=e;return(0,s.jsx)("div",{onClick:()=>{A(t),S(!0)},children:(null==t?void 0:null===(a=t.galleryUrls)||void 0===a?void 0:a.length)>0?t.galleryUrls.map((e,a)=>a<3?(0,s.jsx)(h(),{src:e||"/img/profile.png",alt:"Ads",width:36,height:36,className:"avatar avatar-sm"},a):4===a?(0,s.jsx)("span",{children:"..."},a):void 0):(0,s.jsx)(h(),{src:"/img/profile.png",alt:"category_image",width:36,height:36,className:"avatar avatar-sm"})})}},{key:"title",value:"title"},{key:"description",value:"Description"},{value:"Address",component:e=>{let{data:a}=e;return(0,s.jsx)(s.Fragment,{children:"".concat(a.city||""," ").concat(a.zip_code||"")})}},{value:"expiry date",component:e=>{let{data:a}=e;return(0,s.jsx)(s.Fragment,{children:(0,d.i)(a.expiry_date)})}},{key:"created_at",value:"Created At",component:e=>{let{data:a}=e;return(0,s.jsx)(s.Fragment,{children:(0,d.i)(a.createdAt)})}},{value:"Status",component:e=>{let{data:a}=e;return(0,s.jsx)(r.OF,{data:a})}},{value:"Action",component:e=>{let{data:a}=e;return(0,s.jsx)(r.EY,{data:a,setSelected:g,setEdit:y,id:a._id})},className:"d-flex "}];return(0,s.jsxs)(s.Fragment,{children:[(w===c.P7||w===c.bk)&&(0,s.jsx)(Z,{id:_._id||0,isActive:w===c.P7||w===c.bk,onClose:y,data:{..._,id:_._id},type:w==c.P7?c.P7:c.bk,urls:w==c.P7?"".concat("ads","/add"):"".concat("ads","/update"),path:"ads"}),(0,s.jsx)("div",{className:"card bg-white",children:(0,s.jsx)("div",{className:"card-datatable",children:(0,s.jsxs)("div",{className:"dataTables_wrapper dt-bootstrap5",children:[(0,s.jsx)(m.ZP,{title:"List of ".concat("ads"),onAddClick:()=>y(c.P7),onExportClick:()=>{P.Z.download()},disable:[m.bi]}),(0,s.jsx)(l.ZP,{filter:v,disable:[l.dd,l.e_],setFilter:j,orderBy:k}),(0,s.jsx)(r.ZP,{tableCustomize:B,data:b&&(null==b?void 0:b.list),StartIndex:+v.limit*(+u-1)+1||1}),(0,s.jsx)(o.Z,{currentPage:u||0,limit:v.limit,setCurrentPage:x,total:b&&(null===(e=b.pagination)||void 0===e?void 0:e.total)||0})]})})})]})}}}]);