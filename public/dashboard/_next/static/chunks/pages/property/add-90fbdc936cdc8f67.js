(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{9598:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/property/add",function(){return a(8455)}])},8455:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var s=a(5893),r=a(1163),n=a(8711),l=a(1768),o=a(1313),d=a(9574),i=a(7385),p=a(8884),c=a(1052),u=a(7294),y=a(5379),b=a(7227),m=a(579),j=a(2175),x=a(240),h=a(4779),v=a(5292),_=a(1192),k=a(9473),f=a(9471),N=()=>{let e=(0,r.useRouter)(),t=(0,k.I0)(),a=e.query.id,N=e.query.name,[g,w]=(0,u.useState)([]),[F,Z]=(0,u.useState)(""),[P,D]=(0,u.useState)([]),[O,S]=(0,u.useState)([]),[E,T]=(0,u.useState)(null),C=async s=>{t((0,v.N)(!0));try{let r=new FormData;(Object.keys(s)||[]).map(e=>{"object"!=typeof s[e]?r.append(e,s[e]):(Object.keys(s[e])||[]).map(t=>{console.log(s[e][t]),"object"==typeof s[e][t]?(Object.keys(s[e][t])||[]).map(a=>{r.append("".concat(e,"[").concat(a,"][]"),s[e][t][a])}):r.append("".concat(e,"[]"),s[e][t])})}),r.delete("coordinates[]"),r.delete("banner"),s.coordinates.lat&&s.coordinates.lng&&(r.append("coordinates[]",s.coordinates.lat),r.append("coordinates[]",s.coordinates.lng)),F&&r.append("banner",F),"string"==typeof a&&r.append("user",a),"string"==typeof N&&r.append("name",N),P&&Object.values(P||{}).map(e=>{r.append("images",e)}),E&&r.append("video",E);let n=await h.Z.post("property/add",r,0,!0,!0);200==n.status?(t((0,v.N)(!1)),t((0,_.d)(!0)),setTimeout(()=>{e.back()},200)):401===n.data.status&&(t((0,f.gy)()),null==e||e.push("/login"))}catch(e){t((0,v.N)(!1))}finally{t((0,v.N)(!1))}};return(0,s.jsx)("div",{className:"card bg-white",children:(0,s.jsx)("div",{className:"card-datatable",children:(0,s.jsxs)("div",{className:"dataTables_wrapper dt-bootstrap5",children:[(0,s.jsx)(n.ZP,{title:"Add Property",onAddClick:()=>{e.back()},onExportClick:()=>{},AddButtonText:"Back",disable:[n.bi]}),(0,s.jsx)(j.J9,{enableReinitialize:!0,onSubmit:C,initialValues:{},validationSchema:x.Z,children:e=>{var t;let{values:a,setValues:r,errors:n}=e;return(0,s.jsx)(j.l0,{children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"px-5 py-5",children:[(0,s.jsx)(l.Z,{type:y.bk,setData:r,data:a,errors:n}),(0,s.jsx)(o.ZP,{type:y.bk,setData:r,data:a,errors:n}),(null==a?void 0:a.property_type)!=="Plot"&&(null==a?void 0:a.property_type)!=="Farm"&&(0,s.jsx)(d.Z,{type:y.bk,setData:r,data:a,errors:n}),(null==a?void 0:a.property_type)!=="Plot"&&(null==a?void 0:a.property_type)!=="Farm"&&(0,s.jsx)(i.Z,{type:y.bk,setData:r,data:a,errors:n}),(null==a?void 0:a.property_type)!=="Plot"&&(null==a?void 0:a.property_type)!=="Farm"&&(0,s.jsx)(p.Z,{type:y.bk,setData:r,data:a,errors:n}),(null==a?void 0:a.property_type)!=="Plot"&&(null==a?void 0:a.property_type)!=="Farm"&&(0,s.jsx)(c.Z,{type:y.bk,setData:r,data:a,errors:n})]}),(0,s.jsx)(m.Z,{video:E,setVideo:T}),(0,s.jsx)(b.Z,{selectedFile:g,setSelectedFile:w,setFiles:D,Files:P,setDeletedFile:S,banner:F,setBanner:Z}),(0,s.jsx)("div",{className:"mx-2 my-2",children:(null===(t=Object.keys(n||{}))||void 0===t?void 0:t.length)>0&&(0,s.jsx)("div",{className:"p-3",children:(0,s.jsx)("div",{className:"p-3 mb-2 bg-danger text-white",children:"Oops! It seems there's an error in the form submission. Please review the information"})})}),(0,s.jsx)("div",{className:"d-flex h-98 justify-content-center",children:(0,s.jsx)("button",{type:"submit",className:"btn btn-primary mt-5 d-block text-uppercase",children:"Update  "})})]})})}})]})})})}}},function(e){e.O(0,[86,255,958,585,544,563,919,774,888,179],function(){return e(e.s=9598)}),_N_E=e.O()}]);