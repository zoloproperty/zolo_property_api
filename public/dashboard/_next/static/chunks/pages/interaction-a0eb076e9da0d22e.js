(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[770],{160:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/interaction",function(){return n(9529)}])},9529:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var i=n(5893),l=n(7294),r=n(9473),s=n(5049),a=n(3023),o=n(6704),d=n(5379),c=n(8711),u=n(7435),p=n(5434),m=n(4076),v=n(1872),x=n(9583),y=n(9332),h=n(4779),f=n(5292),j=n(1192),N=n(9471);let b=["name","city","number","zip_code","is_converted","property","ads"];var E=()=>{var e;let t="interaction";u.Z.path=t;let n=(0,r.I0)(),E=(0,y.useRouter)(),g=(0,r.v9)(e=>{var t;return null===(t=e.login.userToken)||void 0===t?void 0:t.token}),{recallApi:C}=((0,r.v9)(e=>{var t;return null===(t=e.login.userToken)||void 0===t?void 0:t.role}),(0,r.v9)(e=>e.recallApi)),[_,w]=(0,l.useState)(d.Wh),[A,Z]=(0,l.useState)({list:[],pagination:{total:0}}),[z,k]=(0,l.useState)(1),[I,P]=(0,l.useState)("");(0,l.useEffect)(()=>{u.Z.get(z,{..._,limit:+(null==_?void 0:_.limit)},Z)},[_,g,n,z,C]);let R=async e=>{try{let t={user:e.user,name:e.name,number:e.number,property:e.property,coordinates:e.coordinates,ads:e.ads,city:e.city,zip_code:e.zip_code,status:"interested"},i=e.property?"property":"ads",l=await h.Z.post("interested/add",{...t,type:i},0,!0,!0);await h.Z.put("interaction/update",{is_converted:!0,user:e.user,zip_code:e.zip_code},null==e?void 0:e.id),200==l.status?(n((0,f.N)(!1)),n((0,j.d)(!0)),setTimeout(()=>{E.push("/interested")},200)):401===l.data.status&&(n((0,N.gy)()),null==E||E.push("/login"))}catch(e){n((0,f.N)(!1))}finally{n((0,f.N)(!1))}},T=[{value:"S.No",index:!0},{value:"Id",component:e=>{let{data:t}=e;return(0,i.jsx)("div",{children:((null==t?void 0:t.unique_id)||"").slice(-6).toUpperCase()})}},{value:"interaction",component:e=>{let{data:t}=e;return(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"btn bg-primary bg-opacity-10 pe-none pe-auto",onClick:()=>{(null==t?void 0:t.property)?E.push("/property/edit?id=".concat(t.property)):E.push("/ads/edit?id=".concat(t.ads))},children:[(0,i.jsx)(v.tdP,{size:25}),(0,i.jsx)("span",{className:"ms-1",children:(null==t?void 0:t.property)?"PROPERTY":"AD"})]})})}},{key:"type",value:"type",component:e=>{let{data:t}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"d-inline-block px-2 py-2 rounded-2 pe-none",children:[(null==t?void 0:t.type)=="like"?(0,i.jsx)(v.b8C,{size:23}):(0,i.jsx)(x.dSq,{size:23,style:{color:"#FB6340"}}),(0,i.jsx)("span",{className:"ms-1",children:(null==t?void 0:t.type)=="like"?"LIKE":"VIEW"})]})})}},{value:"Action",component:e=>{let{data:t}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:()=>{(null==t?void 0:t.is_converted)||R(t)},className:"btn ".concat((null==t?void 0:t.is_converted)?"":"btn-warning"),"data-tooltip":"Interested",children:(0,i.jsx)(p._Vo,{size:16})}),"\xa0"]})}}];return(0,i.jsx)("div",{className:"card bg-glass",children:(0,i.jsx)("div",{className:"card-datatable ",children:(0,i.jsxs)("div",{className:"dataTables_wrapper dt-bootstrap5",children:[(0,i.jsx)(c.ZP,{title:"List of ".concat(t),onAddClick:()=>P(d.P7),onExportClick:()=>{u.Z.download()},disable:[c.aO,c.bi]}),(0,i.jsx)(s.ZP,{filter:_,setFilter:w,orderBy:b,disable:[s.dd,s.e_]}),(A&&A.list||[]).map((e,t)=>{let n=[...e.interaction||[]].map(t=>({...t,name:null==e?void 0:e.name,city:null==e?void 0:e.city,number:null==e?void 0:e.number}));return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(m.Z,{defaultActiveKey:"1",className:"mt-3 mx-3 my-2",children:(0,i.jsxs)(m.Z.Item,{eventKey:"0",children:[(0,i.jsx)(m.Z.Header,{children:(0,i.jsxs)("div",{className:"row w-100",children:[(0,i.jsxs)("div",{className:"col",style:{maxWidth:"70px"},children:[t+(+_.limit*(+z-1)+1||1),"."]}),(0,i.jsx)("div",{className:"col text-capitalize",children:(0,i.jsx)("b",{children:(null==e?void 0:e.name)||""})}),(0,i.jsx)("div",{className:"col text-capitalize",children:(null==e?void 0:e.city)||""}),(0,i.jsx)("div",{className:"col text-capitalize",children:(0,i.jsxs)("a",{href:"tel:+91".concat(null==e?void 0:e.number),children:[(0,i.jsx)(p.fFs,{size:20}),(0,i.jsx)("span",{className:"ms-1",children:(null==e?void 0:e.number)||""})]})}),(0,i.jsx)("div",{className:"col text-capitalize",children:(null==e?void 0:e.is_converted)?(0,i.jsx)(v.b8C,{size:20}):(0,i.jsx)(v.q7O,{size:20})})]})}),(0,i.jsx)(m.Z.Body,{children:(0,i.jsx)(a.ZP,{tableCustomize:T,data:n})})]})})})}),(0,i.jsx)(o.Z,{currentPage:z,limit:_.limit,setCurrentPage:k,total:(null===(e=A.pagination)||void 0===e?void 0:e.total)||0})]})})})}},4076:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var i=n(3967),l=n.n(i),r=n(7294),s=n(7150),a=n(6792),o=n(1505),d=n(6592),c=n(3825),u=function(...e){return e.filter(e=>null!=e).reduce((e,t)=>{if("function"!=typeof t)throw Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(...n){e.apply(this,n),t.apply(this,n)}},null)},p=n(4509),m=n(2785),v=n(5893);let x={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function y(e,t){let n=`offset${e[0].toUpperCase()}${e.slice(1)}`,i=t[n],l=x[e];return i+parseInt((0,o.Z)(t,l[0]),10)+parseInt((0,o.Z)(t,l[1]),10)}let h={[d.Wj]:"collapse",[d.Ix]:"collapsing",[d.d0]:"collapsing",[d.cn]:"collapse show"},f=r.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:i,onExiting:s,className:a,children:o,dimension:d="height",in:x=!1,timeout:f=300,mountOnEnter:j=!1,unmountOnExit:N=!1,appear:b=!1,getDimensionValue:E=y,...g},C)=>{let _="function"==typeof d?d():d,w=(0,r.useMemo)(()=>u(e=>{e.style[_]="0"},e),[_,e]),A=(0,r.useMemo)(()=>u(e=>{let t=`scroll${_[0].toUpperCase()}${_.slice(1)}`;e.style[_]=`${e[t]}px`},t),[_,t]),Z=(0,r.useMemo)(()=>u(e=>{e.style[_]=null},n),[_,n]),z=(0,r.useMemo)(()=>u(e=>{e.style[_]=`${E(_,e)}px`,(0,p.Z)(e)},i),[i,E,_]),k=(0,r.useMemo)(()=>u(e=>{e.style[_]=null},s),[_,s]);return(0,v.jsx)(m.Z,{ref:C,addEndListener:c.Z,...g,"aria-expanded":g.role?x:null,onEnter:w,onEntering:A,onEntered:Z,onExit:z,onExiting:k,childRef:o.ref,in:x,timeout:f,mountOnEnter:j,unmountOnExit:N,appear:b,children:(e,t)=>r.cloneElement(o,{...t,className:l()(a,o.props.className,h[e],"width"===_&&"collapse-horizontal")})})});function j(e,t){return Array.isArray(e)?e.includes(t):e===t}let N=r.createContext({});N.displayName="AccordionContext";let b=r.forwardRef(({as:e="div",bsPrefix:t,className:n,children:i,eventKey:s,...o},d)=>{let{activeEventKey:c}=(0,r.useContext)(N);return t=(0,a.vE)(t,"accordion-collapse"),(0,v.jsx)(f,{ref:d,in:j(c,s),...o,className:l()(n,t),children:(0,v.jsx)(e,{children:r.Children.only(i)})})});b.displayName="AccordionCollapse";let E=r.createContext({eventKey:""});E.displayName="AccordionItemContext";let g=r.forwardRef(({as:e="div",bsPrefix:t,className:n,onEnter:i,onEntering:s,onEntered:o,onExit:d,onExiting:c,onExited:u,...p},m)=>{t=(0,a.vE)(t,"accordion-body");let{eventKey:x}=(0,r.useContext)(E);return(0,v.jsx)(b,{eventKey:x,onEnter:i,onEntering:s,onEntered:o,onExit:d,onExiting:c,onExited:u,children:(0,v.jsx)(e,{ref:m,...p,className:l()(n,t)})})});g.displayName="AccordionBody";let C=r.forwardRef(({as:e="button",bsPrefix:t,className:n,onClick:i,...s},o)=>{t=(0,a.vE)(t,"accordion-button");let{eventKey:d}=(0,r.useContext)(E),c=function(e,t){let{activeEventKey:n,onSelect:i,alwaysOpen:l}=(0,r.useContext)(N);return r=>{let s=e===n?null:e;l&&(s=Array.isArray(n)?n.includes(e)?n.filter(t=>t!==e):[...n,e]:[e]),null==i||i(s,r),null==t||t(r)}}(d,i),{activeEventKey:u}=(0,r.useContext)(N);return"button"===e&&(s.type="button"),(0,v.jsx)(e,{ref:o,onClick:c,...s,"aria-expanded":Array.isArray(u)?u.includes(d):d===u,className:l()(n,t,!j(u,d)&&"collapsed")})});C.displayName="AccordionButton";let _=r.forwardRef(({as:e="h2",bsPrefix:t,className:n,children:i,onClick:r,...s},o)=>(t=(0,a.vE)(t,"accordion-header"),(0,v.jsx)(e,{ref:o,...s,className:l()(n,t),children:(0,v.jsx)(C,{onClick:r,children:i})})));_.displayName="AccordionHeader";let w=r.forwardRef(({as:e="div",bsPrefix:t,className:n,eventKey:i,...s},o)=>{t=(0,a.vE)(t,"accordion-item");let d=(0,r.useMemo)(()=>({eventKey:i}),[i]);return(0,v.jsx)(E.Provider,{value:d,children:(0,v.jsx)(e,{ref:o,...s,className:l()(n,t)})})});w.displayName="AccordionItem";let A=r.forwardRef((e,t)=>{let{as:n="div",activeKey:i,bsPrefix:o,className:d,onSelect:c,flush:u,alwaysOpen:p,...m}=(0,s.Ch)(e,{activeKey:"onSelect"}),x=(0,a.vE)(o,"accordion"),y=(0,r.useMemo)(()=>({activeEventKey:i,onSelect:c,alwaysOpen:p}),[i,c,p]);return(0,v.jsx)(N.Provider,{value:y,children:(0,v.jsx)(n,{ref:t,...m,className:l()(d,x,u&&`${x}-flush`)})})});A.displayName="Accordion";var Z=Object.assign(A,{Button:C,Collapse:b,Item:w,Header:_,Body:g})}},function(e){e.O(0,[86,994,585,752,291,774,888,179],function(){return e(e.s=160)}),_N_E=e.O()}]);